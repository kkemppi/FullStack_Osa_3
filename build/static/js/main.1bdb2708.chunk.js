(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=t(2),l=t(3),s=t.n(l),i="api/persons/",m=function(){return s.a.get(i).then((function(e){return e.data}))},f=m,d=function(e){return s.a.post(i,e).then((function(e){return e.data}))},h=function(e){return window.confirm("Delete ".concat(e.name,"?"))?s.a.delete("".concat(i,"/").concat(e.id)):m()},b=function(e){return s.a.put("".concat(i,"/").concat(e.id),e)},p=(t(36),function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"success"},n)}),E=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},v=function(e,n,t,a,r){h(e).then((function(){f().then((function(e){n(e)}),t("Removed ".concat(e.name)),setTimeout((function(){t(null)}),4e3))})).catch((function(t){r("".concat(e.name," has already been removed from server")),n(a.filter((function(n){return n.id!==e.id}))),setTimeout((function(){r(null)}),4e3)}))},w=function(e){var n=e.to_show,t=e.setPersons,a=e.setMessage,u=e.persons,c=e.setError;return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{onClick:function(){return v(n,t,a,u,c)}},"delete"))},g=function(e){var n=e.persons,t=e.filterField,a=e.setPersons,u=e.setMessage,c=e.setError,o=n.filter((function(e){return e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())}));return r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e.name}," ",r.a.createElement(w,{to_show:e,persons:n,setPersons:a,setMessage:u,setError:c}))})))},N=function(e,n,t,a,r,u,c,o){var l={name:r,number:u};if(e.map((function(e){return e.name})).includes(r)&&window.confirm("".concat(l.name," is already added to phonebook, replace old number with new one?"))){var s=e.find((function(e){return e.name===r}));s.number=u,b(s).then((function(t){n(e.map((function(e){return e.id!==t.id?e:t.data}))),c("Updated number of ".concat(r)),setTimeout((function(){c(null)}),4e3)})).catch((function(t){o("".concat(r," has already been removed from server")),n(e.filter((function(e){return e.id!==s.id}))),setTimeout((function(){o(null)}),4e3)}))}e.map((function(e){return e.name})).includes(r)||d(l).then((function(t){n(e.concat(t))}),c("Added ".concat(r)),setTimeout((function(){c(null)}),4e3)),t(""),a("")},j=function(e){var n=e.persons,t=e.setPersons,a=e.setNewName,u=e.setNewNum,c=e.newName,o=e.newNumber,l=e.handle_name_input,s=e.handle_num_input,i=e.setMessage,m=e.setError;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),N(n,t,a,u,c,o,i,m)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:c,onChange:l})," ",r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:o,onChange:s})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},O=function(e){var n=e.handle_filter;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{onChange:n}))},_=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),s=l[0],i=l[1],m=Object(a.useState)(""),d=Object(o.a)(m,2),h=d[0],b=d[1],v=Object(a.useState)(""),w=Object(o.a)(v,2),N=w[0],_=w[1],P=Object(a.useState)(null),S=Object(o.a)(P,2),k=S[0],y=S[1],C=Object(a.useState)(null),M=Object(o.a)(C,2),T=M[0],L=M[1];Object(a.useEffect)((function(){f().then((function(e){u(e)})).catch((function(e){L("404 data not found"),setTimeout((function(){L(null)}),4e3)}))}),[]);return r.a.createElement("div",null,r.a.createElement(p,{message:k}),r.a.createElement(E,{message:T}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{handle_filter:function(e){return _(e.target.value)}}),r.a.createElement("h2",null,"add new number"),r.a.createElement(j,{persons:t,setPersons:u,newNumber:h,setNewNum:b,newName:s,setNewName:i,handle_num_input:function(e){return b(e.target.value)},handle_name_input:function(e){return i(e.target.value)},setMessage:y,setError:L}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:t,filterField:N,setPersons:u,setMessage:y,setError:L}))};c.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.1bdb2708.chunk.js.map