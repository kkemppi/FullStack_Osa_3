(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),c=t(2),l=t(3),s=t.n(l),i="/api/persons",m=function(){return s.a.get(i).then((function(e){return e.data}))},f=m,d=function(e){return s.a.post(i,e).then((function(e){return e.data}))},h=function(e){return window.confirm("Delete ".concat(e.name,"?"))?s.a.delete("".concat(i,"/").concat(e.id)):m()},p=function(e){return s.a.put("".concat(i,"/").concat(e.id),e)},b=(t(36),function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"success"},n)}),E=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},v=function(e,n,t,a,r){h(e).then((function(){f().then((function(e){n(e)}),t("Removed ".concat(e.name)),setTimeout((function(){t(null)}),4e3))})).catch((function(t){r("".concat(e.name," has already been removed from server")),n(a.filter((function(n){return n.id!==e.id}))),setTimeout((function(){r(null)}),4e3)}))},w=function(e){var n=e.to_show,t=e.setPersons,a=e.setMessage,u=e.persons,o=e.setError;return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{onClick:function(){return v(n,t,a,u,o)}},"delete"))},g=function(e){var n=e.persons,t=e.filterField,a=e.setPersons,u=e.setMessage,o=e.setError,c=n.filter((function(e){return e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())}));return r.a.createElement("ul",null,c.map((function(e){return r.a.createElement("li",{key:e.name}," ",r.a.createElement(w,{to_show:e,persons:n,setPersons:a,setMessage:u,setError:o}))})))},N=function(e,n,t,a,r,u,o,c){var l={name:r,number:u};if(e.map((function(e){return e.name})).includes(r)&&window.confirm("".concat(l.name," is already added to phonebook, replace old number with new one?"))){var s=e.find((function(e){return e.name===r}));s.number=u,p(s).then((function(t){n(e.map((function(e){return e.id!==t.id?e:t.data}))),o("Updated number of ".concat(r)),setTimeout((function(){o(null)}),4e3)})).catch((function(t){c("".concat(r," has already been removed from server")),n(e.filter((function(e){return e.id!==s.id}))),setTimeout((function(){c(null)}),4e3)}))}else e.map((function(e){return e.name})).includes(r)||d(l).then((function(t){n(e.concat(t))}),o("Added ".concat(r)),setTimeout((function(){o(null)}),4e3)).catch((function(e){o(null),c(e.response.data.error),setTimeout((function(){c(null)}),4e3)}));t(""),a("")},j=function(e){var n=e.persons,t=e.setPersons,a=e.setNewName,u=e.setNewNum,o=e.newName,c=e.newNumber,l=e.handle_name_input,s=e.handle_num_input,i=e.setMessage,m=e.setError;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),N(n,t,a,u,o,c,i,m)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:o,onChange:l})," ",r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:c,onChange:s})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},O=function(e){var n=e.handle_filter;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{onChange:n}))},_=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),l=Object(c.a)(o,2),s=l[0],i=l[1],m=Object(a.useState)(""),d=Object(c.a)(m,2),h=d[0],p=d[1],v=Object(a.useState)(""),w=Object(c.a)(v,2),N=w[0],_=w[1],P=Object(a.useState)(null),S=Object(c.a)(P,2),T=S[0],k=S[1],y=Object(a.useState)(null),C=Object(c.a)(y,2),M=C[0],L=C[1];Object(a.useEffect)((function(){f().then((function(e){u(e)})).catch((function(e){L("404 data not found"),setTimeout((function(){L(null)}),4e3)}))}),[]);return r.a.createElement("div",null,r.a.createElement(b,{message:T}),r.a.createElement(E,{message:M}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{handle_filter:function(e){return _(e.target.value)}}),r.a.createElement("h2",null,"add new number"),r.a.createElement(j,{persons:t,setPersons:u,newNumber:h,setNewNum:p,newName:s,setNewName:i,handle_num_input:function(e){return p(e.target.value)},handle_name_input:function(e){return i(e.target.value)},setMessage:k,setError:L}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:t,filterField:N,setPersons:u,setMessage:k,setError:L}))};o.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f3209e84.chunk.js.map